# 실시간 위치 데이터 생성 시뮬레이터

이 도구는 지정된 설정에 따라 가상의 이동 경로와 더미(dummy)를 생성하고, 실시간으로 위치 데이터를 특정 API 엔드포인트로 전송하는 Node.js 기반 CLI 애플리케이션이다.

## 주요 기능

-   **동적 경로 생성**: 설정된 경계 내에서 다양한 속도와 길이의 이동 경로를 자동으로 생성.
-   **스침 이벤트 시뮬레이션**: 두 더미가 같은 시간 또는 같은 공간을 지나가도록 경로를 의도적으로 생성 가능.
-   **실시간 데이터 전송**: 시뮬레이션이 진행되는 동안 각 더미의 위치 정보를 1초마다 지정된 API로 전송.
-   **무한 반복 실행**: 한 사이클이 완료되면 자동으로 다음 사이클을 시작하여 지속적인 데이터 스트림을 생성.
-   **CLI 기반 설정**: 명령줄 인자를 통해 시뮬레이션의 모든 주요 파라미터를 쉽게 제어.

## 동작 방식

1.  CLI를 통해 전달된 설정값 또는 기본값을 사용하여 지정된 개수의 이동 경로를 생성.
2.  생성된 각 경로에 더미를 할당하고 시뮬레이션을 시작.
3.  100ms 간격으로 각 더미의 위치를 경로와 속도에 따라 업데이트.
4.  1초에 한 번씩(throttle) 모든 더미의 현재 상태(ID, 위치, 속도, 타임스탬프 등)를 API 서버로 POST 요청.
5.  모든 더미가 경로를 완주하면 현재 사이클을 종료하고, 잠시 대기 후 새로운 경로를 생성하여 다음 사이클을 자동으로 시작.

## 사전 요구 사항

-   Node.js (v16 이상 권장)
-   npm

## 설치

프로젝트 디렉터리에서 아래 명령어를 실행하여 필요한 패키지를 설치한다.

```bash
npm install axios uuid yargs
```

## 사용법

### 기본 실행

기본 설정값으로 시뮬레이터를 즉시 시작한다.

```bash
node src/simulator.js
```

### 옵션과 함께 실행

명령줄 인자를 사용하여 시뮬레이션 설정을 변경할 수 있다.

```bash
node src/simulator.js --routeCount 50 --minSpeed 20 --maxSpeed 60 --overlapRatio 0.5
```

### 사용 가능한 옵션

| 옵션 (단축키)         | 설명                                   | 기본값     | 선택값                      |
| --------------------- | -------------------------------------- | ---------- | --------------------------- |
| `--routeCount` (`-c`) | 한 사이클에 생성할 총 경로(더미)의 수  | `10`       | 숫자                        |
| `--minSpeed`          | 더미의 최소 속도 (km/h)                | `30`       | 숫자                        |
| `--maxSpeed`          | 더미의 최대 속도 (km/h)                | `80`       | 숫자                        |
| `--overlapRatio` (`-o`) | 교차/겹침이 발생하는 경로의 비율       | `0.4`      | 0부터 1 사이의 숫자         |
| `--overlapType`       | 겹침 유형                              | `temporal` | `temporal`, `spatial`       |
| `--pathLengthType` (`-l`) | 경로의 전체적인 길이 유형              | `short`    | `short`, `medium`, `long`   |

## 설정

-   **API 엔드포인트**: 데이터 전송 API 주소는 `src/simulator.js` 파일 내 `sendDataToServer` 함수 안에 하드코딩되어 있다. 필요시 이 부분을 직접 수정해야 한다.
-   **지리적 경계**: 경로가 생성되는 위/경도 범위는 `src/simulator.js` 파일 내 `main` 함수의 `config` 객체에 하드코딩되어 있다. (기본값: 서울 중심부)
